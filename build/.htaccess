# --- UTF-8 for text files ---
AddDefaultCharset UTF-8
<IfModule mod_mime.c>
  AddCharset UTF-8 .txt
</IfModule>

# --- Prevent caching of entry HTML ---
<IfModule mod_headers.c>
  <FilesMatch "\.(html)$">
    Header set Cache-Control "no-store, no-cache, must-revalidate, max-age=0"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>

  # Cache static build assets long-term
  <FilesMatch "\.(js|css|woff2|png|jpg|jpeg|svg|webp)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
</IfModule>

# --- 404 handling for static build ---
Options -MultiViews
ErrorDocument 404 /404.html

<IfModule mod_rewrite.c>
  RewriteEngine On

  # Serve real files / folders directly
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # All other requests return 404 (served by ErrorDocument above)
  RewriteRule . - [R=404,L]
</IfModule>
